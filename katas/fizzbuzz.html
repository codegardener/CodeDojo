<!DOCTYPE html>
<html>
	<head>
		<title>Code Dojo | Fizz Buzz</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="../css/dojo.css">
		<link href="../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
		
		<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container-fluid">
					<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="brand" href="../index.html">Fizz Buzz - Code Dojo</a>
					<div class="nav-collapse collapse">
						<ul class="nav">
							<li><a href="../index.html">Home</a></li>
							<li><a href="../links.html">Links</a></li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span12">

					<button type="button" class="btn collapsed" data-toggle="collapse" data-target="#instructions">
						Instructions
					</button>
					<div id="instructions" class="collapse">
						<div class="well">
							<h1>Fizz Buzz</h1>
							<p>Source: <a href="http://content.codersdojo.org/code-kata-catalogue/fizz-buzz/">Coders Dojo</a></p>

							<p>Return "fizz", "buzz" or "fizzbuzz".</p>
							<p>For a given natural number greater than zero, return:</p>
							<ul>
								<li>"fizz" if the number is divisible by 3</li>
								<li>"buzz" if the number is divisible by 5</li>
								<li>"fizzbuzz" if the number is divisible by 3 and 5</li>
							</ul>

							<h2>Phases</h2>
							<ol>
								<li>Accept a single number input and return the correct response.</li>
								<li>Accept a range of numbers and return a listing of the correct responses.</li>
								<li>Allow for changing of the parameters of the problem:
									<ul>
										<li>Change the target numbers to different numbers (ie. 2 &amp; 7)</li>
										<li>Change the response words (ie. "snap" &amp; "pop")</li>
									</ul>
								</li>
							</ol>
							
							<button type="button" class="btn collapsed" data-toggle="collapse" data-target="#instructions">
								Hide Instructions
							</button>
						</div>
					</div><!--/instructions-->

<!-- Your Solution Goes Here -->

<div class="row-fluid">
	<div class="span6">
		<form>
			<fieldset>
				<legend>Input</legend>
				<div class="control-group" id="group-1">
					<label>Range Number 1 <span class="label">(Required)</span></label>
					<input id="input-number-1" type="text" value="1" placeholder="Type a natural number"><br>
				</div>
				<div class="control-group" id="group-2">
					<label>Range Number 2</label>
					<input id="input-number-2" type="text" value="100" placeholder="Type a natural number"><br>
				</div>
				<div class="control-group" id="group-3">
					<label>Word Substitute 1 <span class="label">(Required)</span></label>
					<input id="input-word-1" type="text" value="fizz"><br>
				</div>
				<div class="control-group" id="group-4">
					<label>Number to Substitute 1 <span class="label">(Required)</span></label>
					<input id="input-substitute-1" type="text" value="3"><br>
				</div>
				<div class="control-group" id="group-5">
					<label>Word Substitute 2 <span class="label">(Required)</span></label>
					<input id="input-word-2" type="text" value="buzz"><br>
				</div>
				<div class="control-group" id="group-6">
					<label>Number to Substitute 2 <span class="label">(Required)</span></label>
					<input id="input-substitute-2" type="text" value="5"><br>
				</div>

				<button id="btn-answer" type="submit" class="btn">Submit</button>
			</fieldset>
		</form>
	</div>
	<div class="span6">
		<div id="answer" class="well">
			<h3>Answer:</h3>
			<p id="answer-paragraph"></p>
		</div>
	</div>
</div>

<!-- End Solution -->

				</div><!--/span-->
			</div><!--/row-->
			
			<hr>
			
			<footer>
				<p>&copy; Luke Minkner 2013</p>
			</footer>
			
		</div><!--/.fluid-container-->
		
		<script src="../js/jquery-1.9.1.min.js"></script>
		<script src="../bootstrap/js/bootstrap.min.js"></script>

		<script>
var proceed = true;

$(document).ready(function(){
	$('#btn-answer').click(function(e){
		e.preventDefault();

		// Cleanup any existing error messages
		$('.control-group').removeClass('error');
		$('.validation').remove();

		proceed = true;

		var x1 = $('#input-number-1').val();
		var x2 = $('#input-number-2').val();
		var word1 = $('#input-word-1').val();
		var word2 = $('#input-word-2').val();
		var y1 = $('#input-substitute-1').val();
		var y2 = $('#input-substitute-2').val();

		x1 = validateNaturalNumber(x1, "#group-1");
		if (x2.length > 0) {
			x2 = validateNaturalNumber(x2, "#group-2");
		} else {
			x2 = x1;
		}

		validateText(word1, "#group-3");
		y1 = validateNaturalNumber(y1, "#group-4");
		validateText(word2, "#group-5");
		y2 = validateNaturalNumber(y2, "#group-6");
		
		if (proceed) {
			var answer = $('#answer-paragraph');
			var numbers = buildArray(x1, x2);
			
			// fizzbuzz the array
			numbers = fizzBuzzed(fizzBuzzed(numbers, y1, word1), y2, word2);
			
			// clear the answer paragraph
			answer.html('');
			
			// print out the array
			$.each(numbers, function(index, val) {
				answer.append(val.text + "<br>");
			});
		} else {
			$('#answer-paragraph').html('');
		}
	});
});

function fizzBuzzed(numbers, factor, sub) {
	for (var i = 0; i < numbers.length; i++) {
		var num = parseInt(numbers[i].number, 10);
		if (num % factor == 0) {
			if (numbers[i].number == numbers[i].text) {
				numbers[i].text = sub;
			} else {
				numbers[i].text += sub;
			}
		}
	}

	return numbers;
}

function buildArray(first, last) {
	// Make sure correct order
	if (first > last) {
		var temp = last;
		last = first;
		first = temp;
	}

	// Build an array of 'Number' objects
	var numberArray = [];
	for (var i = 0; i <= (last - first); i++) {
		numberArray[i] = { number: first + i, text: first + i };
	}
	return numberArray;
}

function validateNaturalNumber(input, group){
	var num = parseInt(input, 10);
	if (isNaN(num) || num < 1) {
		proceed = false;
		$(group).addClass('error').append('<span class="label label-important validation">Please enter a natural number (integer 1 or greater)</span>');
		return -1;
	}
	return num;
}

function validateText(input, group){
	if (!input) {
		proceed = false;
		$(group).addClass('error').append('<span class="label label-important validation">Please enter a word</span>');
		return input;
	}
	return input;
}

		</script>
	</body>
</html>